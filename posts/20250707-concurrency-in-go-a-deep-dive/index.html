<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>번역글: Go의 동시성: 심층 분석 :: philipjkim</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Go(종종 Golang으로 불림)는 처음부터 동시성을 염두에 두고 설계되었습니다. 이 언어는 고루틴, 채널 및 강력한 동시성 모델을 도입하여 다른 많은 언어에서 발견되는 전통적인 접근 방식에 비해 동시성 프로그램을 더 간단하고 직관적으로 작성할 수 있게 했습니다." />
<meta name="keywords" content="programming, dev, golang, concurrency" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://philipjkim.github.io/posts/20250707-concurrency-in-go-a-deep-dive/" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-T6WPMK9J98"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T6WPMK9J98');
</script>




  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">







<link rel="shortcut icon" href="https://philipjkim.github.io/favicon.png">
<link rel="apple-touch-icon" href="https://philipjkim.github.io/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="번역글: Go의 동시성: 심층 분석">
<meta property="og:description" content="Go(종종 Golang으로 불림)는 처음부터 동시성을 염두에 두고 설계되었습니다. 이 언어는 고루틴, 채널 및 강력한 동시성 모델을 도입하여 다른 많은 언어에서 발견되는 전통적인 접근 방식에 비해 동시성 프로그램을 더 간단하고 직관적으로 작성할 수 있게 했습니다." />
<meta property="og:url" content="https://philipjkim.github.io/posts/20250707-concurrency-in-go-a-deep-dive/" />
<meta property="og:site_name" content="philipjkim" />

  <meta property="og:image" content="https://philipjkim.github.io/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2025-07-07 13:43:14 &#43;0900 KST" />












</head>
<body>


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    philipjkim
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="https://github.com/philipjkim">GitHub</a></li>
        
      
        
          <li><a href="/dev/hoola-calculator">Hoola Sum Calculator</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="https://github.com/philipjkim" target="_blank">GitHub</a></li>
        
      
        
          <li><a href="/dev/hoola-calculator" >Hoola Sum Calculator</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://philipjkim.github.io/posts/20250707-concurrency-in-go-a-deep-dive/">번역글: Go의 동시성: 심층 분석</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-07-07</time><span class="post-author">Hiten Pratap Singh</span></div>

  
    <span class="post-tags">
      
      #<a href="https://philipjkim.github.io/tags/programming/">programming</a>&nbsp;
      
      #<a href="https://philipjkim.github.io/tags/dev/">dev</a>&nbsp;
      
      #<a href="https://philipjkim.github.io/tags/golang/">golang</a>&nbsp;
      
      #<a href="https://philipjkim.github.io/tags/concurrency/">concurrency</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p>원문: <a href="https://medium.com/hprog99/concurrency-in-go-a-deep-dive-2abbb4838984">https://medium.com/hprog99/concurrency-in-go-a-deep-dive-2abbb4838984</a> (Translated by Google Gemini)</p>
<hr>
<h2 id="서론">서론<a href="#서론" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="동시성이란-무엇인가">동시성이란 무엇인가?<a href="#동시성이란-무엇인가" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>동시성은 독립적인 활동들의 구성으로 느슨하게 정의될 수 있습니다. 반드시 병렬 실행을 필요로 하지는 않지만, 여러 태스크가 겹치는 시간 동안 진행되도록 허용합니다. 컴퓨팅의 맥락에서 동시 프로그래밍은 여러 태스크가 실행에서 <strong>인터리브(interleave - 여러 대상을 번갈아 가며 실행하거나 배치)</strong> 될 수 있도록 보장하며, 이는 특히 I/O 바운드 태스크나 수많은 이벤트를 동시에 처리해야 하는 애플리케이션(예: 웹 서버에서 여러 클라이언트 연결 처리)에서 중요합니다.</p>
<h3 id="동시성-vs-병렬성">동시성 vs. 병렬성<a href="#동시성-vs-병렬성" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>비공식적인 대화에서 종종 혼용되지만, 동시성과 병렬성은 다른 개념입니다.</p>
<ul>
<li><strong>동시성</strong>은 여러 태스크가 겹치는 시간 동안 시작, 실행 및 완료될 수 있는 경우입니다.</li>
<li><strong>병렬성</strong>은 태스크가 다른 CPU 코어에서 동시에 실행되는 경우입니다.</li>
</ul>
<p>동시성은 여러 프로세서나 CPU 코어가 사용 가능할 경우 병렬성을 활용할 수 있지만, 동시성은 근본적으로 여러 태스크와 그들 간의 상호 작용을 관리하는 것에 관한 것이며, 실제로 정확히 같은 순간에 실행되는지 여부와는 무관합니다.</p>
<p>Go에서 동시성은 항상 병렬성을 의미하지는 않습니다. 그러나 <strong>Go의 런타임 스케줄러</strong> 는 <code>GOMAXPROCS</code> 가 적절히 설정되어 있다면 멀티코어 시스템을 활용하여 고루틴을 병렬로 실행할 수 있습니다.</p>
<h3 id="go가-동시성에-뛰어난-이유">Go가 동시성에 뛰어난 이유<a href="#go가-동시성에-뛰어난-이유" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<ul>
<li><strong>경량 고루틴</strong>: 무거운 운영 체제 스레드 대신 Go는 스택 메모리 사용량 및 생성 오버헤드 측면에서 매우 가벼운 고루틴을 제공합니다.</li>
<li><strong>채널</strong>: 고루틴 간 통신을 위한 일급 언어 구성 요소인 채널은 많은 동시성 패턴을 더 간단하고 명시적으로 만듭니다.</li>
<li><strong>스케줄러</strong>: Go는 수많은 고루틴을 효율적으로 관리하는 내장 스케줄러를 포함하여 개발자가 스레드 관리보다는 설계에 집중할 수 있도록 합니다.</li>
<li><strong>단순성</strong>: 동시성 기본 요소(고루틴 및 채널)는 개념적으로 더 간단하며 구조화된 접근 방식을 장려합니다.</li>
</ul>
<h2 id="동시성의-기초">동시성의 기초<a href="#동시성의-기초" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="스레드와-루틴의-개념">스레드와 루틴의 개념<a href="#스레드와-루틴의-개념" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>대부분의 프로그래밍 언어에서 동시성은 종종 스레드를 사용하여 달성됩니다. 각 스레드는 자체 스택을 가지며 운영 체제에 의해 스케줄링됩니다. 스레드는 생성 및 관리가 비쌀 수 있으며, 스레드 간 전환(컨텍스트 스위칭)에는 상당한 오버헤드가 있습니다.</p>
<p>Go는 <strong>고루틴</strong> 이라는 개념을 도입했는데, 이는 Go 런타임에 의해 관리되는 사용자 공간 &ldquo;스레드&rdquo; 입니다. 고루틴은 전통적인 OS 스레드에 비해 더 가볍습니다. 런타임은 <strong>m:n 스케줄링</strong> 이라는 기술을 사용하는데, 여기서 <strong>m</strong> 개의 고루틴이 <strong>n</strong> 개의 OS 스레드에 다중화됩니다.</p>
<h3 id="운영-체제-스레드-vs-사용자-수준-루틴">운영 체제 스레드 vs. 사용자 수준 루틴<a href="#운영-체제-스레드-vs-사용자-수준-루틴" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<ul>
<li><strong>운영 체제 스레드</strong>: OS에 의해 관리됩니다. 스레드 전환에는 커널 호출 또는 컨텍스트 스위치가 포함될 수 있습니다. 일반적으로 더 무겁습니다.</li>
<li><strong>사용자 수준 루틴 (고루틴)</strong>: 언어 런타임에 의해 생성 및 관리됩니다. 오버헤드가 적기 때문에 고루틴 간 전환이 더 효율적입니다.</li>
</ul>
<h3 id="go-스케줄러의-고수준-개요">Go 스케줄러의 고수준 개요<a href="#go-스케줄러의-고수준-개요" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Go의 스케줄러는 종종 <strong>GMP</strong> 모델이라고 불립니다.</p>
<ul>
<li><strong>G</strong>: 고루틴 (실행 가능한 태스크)</li>
<li><strong>M</strong>: 머신 스레드 (또는 OS 스레드)</li>
<li><strong>P</strong>: 프로세서 (고루틴의 로컬 실행 큐를 보유)</li>
</ul>
<p>스케줄러는 각 &ldquo;P&quot;를 하나의 물리적 코어에 바인딩하고 그 위에서 고루틴을 실행하려고 시도합니다. 고루틴이 블로킹될 때(예: 시스템 호출), 스케줄러는 다른 고루틴을 사용 가능한 다른 스레드로 이동시켜 시스템이 바쁘게 유지되도록 합니다.</p>
<h2 id="고루틴-goroutine">고루틴 (Goroutine)<a href="#고루틴-goroutine" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="고루틴이란-무엇인가">고루틴이란 무엇인가?<a href="#고루틴이란-무엇인가" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>고루틴은 다른 함수나 메서드와 동시에 실행되는 함수 또는 메서드입니다. 동일한 주소 공간(동일한 프로세스)에서 실행되므로 메모리 공유가 더 간단하지만, 경쟁 조건을 피하기 위해 여전히 동기화가 필요합니다.</p>
<h3 id="고루틴-시작-방법">고루틴 시작 방법<a href="#고루틴-시작-방법" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>함수 또는 메서드 호출 앞에 <code>go</code> 키워드를 배치하여 고루틴을 시작할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="s">&#34;time&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">sayHello</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Hello from goroutine!&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="k">go</span><span class="w"> </span><span class="nf">sayHello</span><span class="p">()</span><span class="w"> </span><span class="c1">// Launching sayHello as a goroutine</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w"> </span><span class="c1">// Give the goroutine time to run</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Main function ends.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>위 예시에서:</p>
<ul>
<li><code>go sayHello()</code>는 <code>sayHello</code>를 호출하는 별도의 고루틴을 생성합니다.</li>
<li><code>main</code> 함수는 고루틴을 시작한 직후 즉시 계속됩니다.</li>
</ul>
<h3 id="자원-점유-및-장점">자원 점유 및 장점<a href="#자원-점유-및-장점" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>고루틴은 작은 스택(일반적으로 수 킬로바이트 정도)으로 시작하며, 이 스택은 필요에 따라 커지거나 줄어듭니다. OS 스레드보다 생성 비용이 저렴하여 상당한 오버헤드 없이 수천 또는 수백만 개의 고루틴을 생성할 수 있습니다. 이는 고도로 동시적인 애플리케이션에 대한 Go의 주요 강점 중 하나입니다.</p>
<h3 id="고루틴-수명-주기-및-스케줄링">고루틴 수명 주기 및 스케줄링<a href="#고루틴-수명-주기-및-스케줄링" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<ul>
<li>고루틴이 생성되면 <strong>실행 큐</strong> 에 배치됩니다.</li>
<li>스케줄러는 실행 큐를 사용 가능한 OS 스레드에 매핑하여 실행합니다.</li>
<li>고루틴이 블로킹 호출(예: I/O, 시스템 호출)을 수행하면, 스케줄러는 다른 고루틴을 선택하여 실행할 수 있어 CPU 코어가 활성 상태를 유지하도록 보장합니다.</li>
<li>고루틴이 완료되면 실행 큐에서 제거됩니다.</li>
</ul>
<h2 id="채널">채널<a href="#채널" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="채널의-기본">채널의 기본<a href="#채널의-기본" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Go의 채널은 고루틴이 서로 통신하고 실행을 동기화하는 메커니즘을 제공합니다. 채널은 두 고루틴을 연결하는 파이프와 같아서 유형이 지정된 데이터를 보내고 받을 수 있습니다.</p>
<ul>
<li><code>make</code> 함수를 사용하여 채널을 생성합니다.
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">ch</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
<ul>
<li>채널은 <strong>유형이 지정됩니다</strong> (예: <code>chan int</code>, <code>chan string</code>, <code>chan float64</code> 등).</li>
</ul>
<h3 id="언버퍼드-채널-대-버퍼드-채널">언버퍼드 채널 대 버퍼드 채널<a href="#언버퍼드-채널-대-버퍼드-채널" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<ul>
<li><strong>언버퍼드 채널 (Unbuffered channels)</strong>: 언버퍼드 채널에 데이터를 보낼 때, 보내는 고루틴은 다른 고루틴이 해당 채널에서 데이터를 받을 때까지 블록되고, 그 반대도 마찬가지입니다.</li>
<li><strong>버퍼드 채널 (Buffered channels)</strong>: 버퍼드 채널은 용량을 가집니다. 보내기 작업은 버퍼가 가득 찼을 때만 블록됩니다. 받기 작업은 버퍼가 비었을 때만 블록됩니다.</li>
</ul>
<p>버퍼드 채널 예시:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">ch</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="c1">// 용량 3을 가진 버퍼드 채널</span><span class="w">
</span></span></span></code></pre></div><h3 id="채널에서-보내기-및-받기">채널에서 보내기 및 받기<a href="#채널에서-보내기-및-받기" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">ch</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c1">// 보내는 고루틴</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">ch</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&#34;Hello from sender!&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c1">// 받는 고루틴</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">msg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">ch</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ul>
<li><code>ch &lt;- value</code>는 채널 <code>ch</code>에 값을 <strong>보냅니다</strong>.</li>
<li><code>value := &lt;-ch</code>는 채널 <code>ch</code>에서 값을 <strong>받습니다</strong>.</li>
</ul>
<h3 id="채널-닫기">채널 닫기<a href="#채널-닫기" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>채널은 내장 <code>close</code> 함수를 사용하여 <strong>닫을</strong> 수 있습니다:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nb">close</span><span class="p">(</span><span class="nx">ch</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><p>채널이 닫히면:</p>
<ul>
<li>더 이상 보내기 작업이 허용되지 않습니다 (닫힌 채널에 보내면 패닉이 발생합니다).</li>
<li>받기 작업은 즉시 반환되며, 버퍼가 비어 있으면 제로 값을 반환합니다.</li>
</ul>
<p>이는 종종 더 이상 데이터가 전송되지 않을 것이라는 신호를 받는 측에 보내는 데 사용됩니다.</p>
<h3 id="select-문"><code>select</code> 문<a href="#select-문" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><code>select</code>는 고루틴이 여러 통신 작업에서 대기할 수 있도록 합니다:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">case</span><span class="w"> </span><span class="nx">msg1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">ch1</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Received:&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">msg1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">case</span><span class="w"> </span><span class="nx">ch2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&#34;Hello!&#34;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Sent a message on ch2&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">default</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;No communication&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ul>
<li><code>select</code> 문은 해당 케이스 중 하나가 진행될 준비가 될 때까지 블록됩니다.</li>
<li>여러 채널이 준비되면, 무작위로 하나를 선택하여 공정성을 보장합니다.</li>
<li><code>default</code> 절이 있으면, 어떤 채널도 준비되지 않았을 경우 즉시 실행됩니다.</li>
</ul>
<h2 id="go에서의-동시성-설계-패턴">Go에서의 동시성 설계 패턴<a href="#go에서의-동시성-설계-패턴" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="51-팬-아웃--팬-인">5.1. 팬-아웃 / 팬-인<a href="#51-팬-아웃--팬-인" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<ul>
<li><strong>팬-아웃 (Fan-Out)</strong>: 여러 고루틴에 작업을 분산시킵니다.</li>
<li><strong>팬-인 (Fan-In)</strong>: 여러 고루틴의 결과를 하나로 모읍니다.</li>
</ul>
<p><strong>예시</strong>: 여러 숫자의 제곱을 병렬로 계산(팬-아웃)한 다음, 이를 합산(팬-인)하려고 합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="s">&#34;sync&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">square</span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">return</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">n</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">numbers</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">results</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="kd">var</span><span class="w"> </span><span class="nx">wg</span><span class="w"> </span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c1">// 팬-아웃</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">num</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">numbers</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="k">defer</span><span class="w"> </span><span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nx">results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">square</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="p">}(</span><span class="nx">num</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c1">// 팬-인</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nb">close</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="kd">var</span><span class="w"> </span><span class="nx">total</span><span class="w"> </span><span class="kt">int</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">results</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">total</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">r</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Sum of squares:&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">total</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h3 id="워커-풀">워커 풀<a href="#워커-풀" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>워커 풀</strong>은 많은 작업이 있지만, 동시에 실행되는 고루틴의 수를 제한하려는 경우에 유용합니다. 워커(고루틴) 풀을 생성하고, 각 워커는 공유 채널에서 작업을 처리합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="s">&#34;sync&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="s">&#34;time&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">worker</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="o">&lt;-</span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="nx">wg</span><span class="w"> </span><span class="o">*</span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">defer</span><span class="w"> </span><span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="nx">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">tasks</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Worker %d processing task %d\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">t</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">200</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="kd">const</span><span class="w"> </span><span class="nx">numWorkers</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">tasks</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="kd">var</span><span class="w"> </span><span class="nx">wg</span><span class="w"> </span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c1">// 워커 고루틴 시작</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="nx">numWorkers</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">go</span><span class="w"> </span><span class="nf">worker</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="w"> </span><span class="nx">tasks</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">wg</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c1">// 작업 전송</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span><span class="w"> </span><span class="nx">j</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">tasks</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">j</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nb">close</span><span class="p">(</span><span class="nx">tasks</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;All tasks processed.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h3 id="파이프라인">파이프라인<a href="#파이프라인" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>파이프라인은 각 단계가 데이터를 수신하고, 처리하고, 다음 단계로 전송하는 일련의 단계입니다. 각 단계는 일반적으로 자체 고루틴에서 실행되는 함수로 구현됩니다.</p>
<h3 id="제너레이터-함수">제너레이터 함수<a href="#제너레이터-함수" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>제너레이터 함수는 함수가 채널을 생성하고 고루틴을 시작하여 일련의 값을 생성하는 패턴입니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">generateNumbers</span><span class="p">(</span><span class="nx">count</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">out</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="nx">count</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nx">out</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nx">i</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nb">close</span><span class="p">(</span><span class="nx">out</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">return</span><span class="w"> </span><span class="nx">out</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h3 id="done-채널-패턴">&ldquo;Done&rdquo; 채널 패턴<a href="#done-채널-패턴" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>중지 또는 완료를 나타내는 신호(종종 <code>struct{}</code>)만 전달하는 채널입니다. 고루틴을 정상적으로 종료하는 데 유용합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">done</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kd">struct</span><span class="p">{})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c1">// 일부 작업 수행</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nb">close</span><span class="p">(</span><span class="nx">done</span><span class="p">)</span><span class="w"> </span><span class="c1">// 완료 신호</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">&lt;-</span><span class="nx">done</span><span class="w"> </span><span class="c1">// 고루틴 대기</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Goroutine finished!&#34;</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><h2 id="go에서의-동기화">Go에서의 동기화<a href="#go에서의-동기화" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>Go의 <code>sync</code> 패키지는 뮤텍스(Mutex), RWMutex, WaitGroup, 그리고 once 루틴을 포함하여 채널을 넘어선 동기화 프리미티브를 제공합니다. 이들은 공유 메모리나 데이터 구조를 가질 때 매우 중요합니다.</p>
<h3 id="뮤텍스">뮤텍스<a href="#뮤텍스" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>뮤텍스</strong> (상호 배제 잠금)는 한 번에 하나의 고루틴만이 공유 리소스에 접근할 수 있도록 보장합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nx">main</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="s">&#34;sync&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="kd">var</span><span class="w"> </span><span class="nx">count</span><span class="w"> </span><span class="kt">int</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="kd">var</span><span class="w"> </span><span class="nx">mu</span><span class="w"> </span><span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="kd">var</span><span class="w"> </span><span class="nx">wg</span><span class="w"> </span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="k">defer</span><span class="w"> </span><span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nx">mu</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nx">count</span><span class="o">++</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nx">mu</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Final count:&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">count</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w"> 
</span></span></span></code></pre></div><h3 id="rwmutex-읽기-쓰기-뮤텍스">RWMutex (읽기-쓰기 뮤텍스)<a href="#rwmutex-읽기-쓰기-뮤텍스" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><code>RWMutex</code> 는 여러 리더가 리소스에 동시적으로 접근할 수 있도록 허용하지만, 하나의 라이터만이 독점적으로 접근할 수 있도록 합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">rw</span><span class="w"> </span><span class="nx">sync</span><span class="p">.</span><span class="nx">RWMutex</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">data</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 리더</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">rw</span><span class="p">.</span><span class="nf">RLock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">val</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">data</span><span class="p">[</span><span class="s">&#34;key&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">rw</span><span class="p">.</span><span class="nf">RUnlock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 라이터</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">rw</span><span class="p">.</span><span class="nf">Lock</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">data</span><span class="p">[</span><span class="s">&#34;key&#34;</span><span class="p">]</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#34;value&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">rw</span><span class="p">.</span><span class="nf">Unlock</span><span class="p">()</span><span class="w"> 
</span></span></span></code></pre></div><h3 id="waitgroup">WaitGroup<a href="#waitgroup" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><code>WaitGroup</code> 을 사용하면 고루틴 그룹이 완료될 때까지 기다릴 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">wg</span><span class="w"> </span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">i</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">defer</span><span class="w"> </span><span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="c1">// 작업 수행</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}(</span><span class="nx">i</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;All goroutines have finished.&#34;</span><span class="p">)</span><span class="w"> 
</span></span></span></code></pre></div><h3 id="cond-조건-변수">Cond (조건 변수)<a href="#cond-조건-변수" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><code>sync.Cond</code> 는 고루틴이 특정 조건을 기다리거나 신호를 보낼 수 있도록 하는 조건 변수입니다. 이는 채널이나 더 간단한 동기화 프리미티브에 비해 고급 기능이며 덜 일반적으로 필요합니다.</p>
<h3 id="원자적-연산">원자적 연산<a href="#원자적-연산" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><code>sync/atomic</code> 패키지는 카운터나 플래그에 유용한 AddInt64, LoadInt64, StoreInt64와 같은 원자적으로 발생하는 연산을 제공합니다.</p>
<h2 id="고급-동시성-패턴-및-기법">고급 동시성 패턴 및 기법<a href="#고급-동시성-패턴-및-기법" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="취소-및-데드라인을-위한-context">취소 및 데드라인을 위한 Context<a href="#취소-및-데드라인을-위한-context" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Go 1.7 에서 도입된 context 패키지는 API 경계를 넘어 취소 신호, 데드라인, 그리고 요청 범위 데이터를 관리하도록 설계되었습니다. 서버에서 흔히 사용되며, 요청이 시간 초과되거나 중단될 경우 취소를 허용하기 위해 함수를 통해 <code>context.Context</code> 를 전달합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">doWork</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">select</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">case</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">ctx</span><span class="p">.</span><span class="nf">Done</span><span class="p">():</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;work canceled or timed out&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="k">return</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">default</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="c1">// do some work</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">cancel</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nf">WithTimeout</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">defer</span><span class="w"> </span><span class="nf">cancel</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">go</span><span class="w"> </span><span class="nf">doWork</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w"> 
</span></span></span></code></pre></div><h3 id="다중-채널을-사용한-select-멀티플렉싱">다중 채널을 사용한 Select 멀티플렉싱<a href="#다중-채널을-사용한-select-멀티플렉싱" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><code>select</code>를 사용하여 여러 채널에서 대기할 수 있습니다. 이는 타임아웃, 취소 또는 여러 이벤트 스트림 수신과 같은 경우에 매우 유용합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">ch1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">ch2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">ch1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">go</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="nx">ch2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">select</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">case</span><span class="w"> </span><span class="nx">v1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">ch1</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Received from ch1:&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">v1</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">case</span><span class="w"> </span><span class="nx">v2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">ch2</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Received from ch2:&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">v2</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w"> 
</span></span></span></code></pre></div><h3 id="리소스-풀링-예-syncpool">리소스 풀링 (예: <code>sync.Pool</code>)<a href="#리소스-풀링-예-syncpool" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><code>sync.Pool</code>은 재사용 가능한 객체 풀로, 할당을 줄여줍니다. 수명이 짧은 많은 객체를 처리해야 하는 시나리오에 이상적입니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">bufPool</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">sync</span><span class="p">.</span><span class="nx">Pool</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">New</span><span class="p">:</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="kd">interface</span><span class="p">{}</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">return</span><span class="w"> </span><span class="nb">new</span><span class="p">(</span><span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">buf</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">bufPool</span><span class="p">.</span><span class="nf">Get</span><span class="p">().(</span><span class="o">*</span><span class="nx">bytes</span><span class="p">.</span><span class="nx">Buffer</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">buf</span><span class="p">.</span><span class="nf">WriteString</span><span class="p">(</span><span class="s">&#34;Hello&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">buf</span><span class="p">.</span><span class="nf">String</span><span class="p">())</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">buf</span><span class="p">.</span><span class="nf">Reset</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">bufPool</span><span class="p">.</span><span class="nf">Put</span><span class="p">(</span><span class="nx">buf</span><span class="p">)</span><span class="w"> </span><span class="c1">// reuse</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w"> 
</span></span></span></code></pre></div><h3 id="세마포어를-사용한-동시성-관리">세마포어를 사용한 동시성 관리<a href="#세마포어를-사용한-동시성-관리" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Go 에서는 버퍼드 채널을 사용하여 세마포어를 모방할 수 있습니다. 예를 들어, 용량이 n인 채널은 최대 n개의 동시 접근을 허용할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">limit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="kd">chan</span><span class="w"> </span><span class="kd">struct</span><span class="p">{},</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="c1">// semaphore with capacity 5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">doWork</span><span class="p">(</span><span class="nx">id</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">limit</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}{}</span><span class="w">   </span><span class="c1">// acquire</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">defer</span><span class="w"> </span><span class="kd">func</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&lt;-</span><span class="nx">limit</span><span class="w"> </span><span class="p">}()</span><span class="w"> </span><span class="c1">// release</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Worker %d doing work\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">id</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w"> 
</span></span></span></code></pre></div><h2 id="흔한-동시성-함정들">흔한 동시성 함정들<a href="#흔한-동시성-함정들" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="경쟁-조건-race-conditions">경쟁 조건 (Race Conditions)<a href="#경쟁-조건-race-conditions" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>경쟁 조건</strong> 은 여러 고루틴이 공유 데이터에 접근하고 적어도 하나가 적절한 동기화 없이 데이터를 수정할 때 발생합니다. Go의 경쟁 감지기(race detector)를 사용하여 경쟁 조건을 감지할 수 있습니다:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">go run -race main.go 
</span></span></code></pre></div><p>항상 채널이나 동기화 프리미티브(뮤텍스 등)를 사용하여 경쟁 조건을 수정하세요.</p>
<h3 id="교착-상태-deadlocks">교착 상태 (Deadlocks)<a href="#교착-상태-deadlocks" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>교착 상태</strong> 는 고루틴들이 서로를 기다리고 있어서 더 이상 진행할 수 없을 때 발생합니다. 흔한 원인은 다음과 같습니다:</p>
<ul>
<li>잠금 순환 (고루틴 A가 잠금을 보유하고 B에 의해 잠긴 리소스를 기다리는데, B는 다시 A가 보유한 잠금을 기다리는 경우).</li>
<li>채널에서 잘못된 순서로 보내기/받기, 특히 언버퍼드 채널의 경우.</li>
<li>케이스나 기본값 없이 <code>select {}</code>를 사용하는 경우.</li>
</ul>
<h3 id="고루틴-누수-goroutine-leaks">고루틴 누수 (Goroutine Leaks)<a href="#고루틴-누수-goroutine-leaks" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>고루틴 누수</strong> 는 고루틴이 무기한으로 블록되는 경우에 발생하며, 일반적으로 결코 닫히지 않거나 데이터를 수신하지 않는 채널을 기다릴 때 발생합니다. 이는 장기 실행 애플리케이션에서 메모리 누수로 이어질 수 있습니다.</p>
<h3 id="기아-상태-및-공정성-문제">기아 상태 및 공정성 문제<a href="#기아-상태-및-공정성-문제" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>기아 상태는 고루틴이 CPU 시간을 얻지 못하거나 리소스를 확보할 수 없을 때 발생합니다. Go는 공정하게 스케줄링하려고 하지만, 다른 고루틴에 무한 루프나 과도한 계산이 있어서 양보하거나 동기화 지점 없이 고루틴이 기아 상태에 빠질 수 있습니다.</p>
<h3 id="채널에-대한-과도한-의존">채널에 대한 과도한 의존<a href="#채널에-대한-과도한-의존" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>채널은 강력하지만 항상 최선의 해결책은 아닙니다. 채널을 과도하게 사용하면 코드가 복잡해질 수 있습니다. 때로는 간단한 뮤텍스나 원자 변수가 더 적절할 수 있습니다.</p>
<h2 id="동시성-디버깅-및-트레이싱">동시성 디버깅 및 트레이싱<a href="#동시성-디버깅-및-트레이싱" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="경쟁-감지기-race-detector-사용하기">경쟁 감지기 (race detector) 사용하기<a href="#경쟁-감지기-race-detector-사용하기" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>앞서 언급했듯이 다음 명령어로 프로그램을 실행할 수 있습니다:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">go</span><span class="w"> </span><span class="nx">run</span><span class="w"> </span><span class="o">-</span><span class="nx">race</span><span class="w"> </span><span class="nx">main</span><span class="p">.</span><span class="k">go</span><span class="w">  
</span></span></span></code></pre></div><p>경쟁 감지기는 데이터 경쟁에 대해 경고합니다. 이것은 동시성 디버깅에 매우 귀중한 도구입니다.</p>
<h3 id="pprof를-이용한-고루틴-프로파일링"><code>pprof</code>를 이용한 고루틴 프로파일링<a href="#pprof를-이용한-고루틴-프로파일링" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><code>pprof</code>는 Go의 프로파일링 도구입니다. CPU 사용량, 메모리 할당, 고루틴을 프로파일링할 수 있습니다. 웹 기반 앱의 경우:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="s">&#34;net/http/pprof&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 그런 다음 앱을 실행하고 \`/debug/pprof\`로 이동합니다.</span><span class="w">
</span></span></span></code></pre></div><h3 id="go-trace를-이용한-실행-트레이싱"><code>go trace</code>를 이용한 실행 트레이싱<a href="#go-trace를-이용한-실행-트레이싱" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>프로그램 실행 트레이스를 생성하여 고루틴이 어떻게 스케줄링되는지 등을 확인할 수 있습니다:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">go <span class="nb">test</span> -trace trace.out  
</span></span><span class="line"><span class="cl">go tool trace trace.out  
</span></span></code></pre></div><p>시각화는 병목 현상이나 동시성 문제를 찾아내는 데 도움이 될 수 있습니다.</p>
<h3 id="고루틴-로깅-및-모니터링">고루틴 로깅 및 모니터링<a href="#고루틴-로깅-및-모니터링" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>적절하게 배치된 로그 문이나 구조화된 로깅을 사용하면 고루틴 진행 상황을 추적하는 데 도움이 될 수 있습니다. 또한, 로그나 모니터링 대시보드에서 활성 고루틴 수(예: <code>runtime.NumGoroutine()</code>)를 추적하여 누수를 조기에 감지할 수 있습니다.</p>
<h2 id="실제-동시성-사용-사례">실제 동시성 사용 사례<a href="#실제-동시성-사용-사례" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="웹-서버에서의-동시성">웹 서버에서의 동시성<a href="#웹-서버에서의-동시성" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Go의 내장 HTTP 서버는 각 요청을 동시적으로 처리하기 위해 고루틴을 사용하므로, 고부하 서버에 이상적입니다. 예를 들어, 모든 요청은 핸들러 함수를 실행하는 새로운 고루틴을 트리거합니다. 이 동시성 모델은 수동 스레드 관리 없이 쉽게 확장됩니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span><span class="w"> </span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Fprintf</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Hello, Gopher!&#34;</span><span class="p">)</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="p">})</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span><span class="p">))</span><span class="w">  
</span></span></span></code></pre></div><h3 id="백그라운드-작업-및-워커">백그라운드 작업 및 워커<a href="#백그라운드-작업-및-워커" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>마이크로서비스 또는 서버 측 시스템에서는 종종 백그라운드 작업(예: 이메일 전송, 로그 업데이트)이 있습니다. Go 동시성은 채널 또는 메시지 큐에서 작업을 수신하는 워커를 쉽게 시작할 수 있도록 합니다.</p>
<h3 id="마이크로서비스-간-통신">마이크로서비스 간 통신<a href="#마이크로서비스-간-통신" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Go로 마이크로서비스를 구축할 때, 동시성은 여러 다운스트림 호출을 병렬로 처리하는 데 자주 사용됩니다. 예를 들어, 단일 요청이 여러 내부 서비스로 팬아웃되고, 응답을 집계(팬인)하여 신속하게 반환할 수 있습니다.</p>
<h3 id="메시징-및-이벤트-처리">메시징 및 이벤트 처리<a href="#메시징-및-이벤트-처리" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>Go의 동시성 패턴은 여러 고루틴이 메시지 큐나 채널에서 대기하고 이벤트가 들어오면 응답하는 이벤트 기반 시스템을 구현하는 데 자연스럽습니다.</p>
<h2 id="동시성-모범-사례-best-practices">동시성 모범 사례 (Best Practices)<a href="#동시성-모범-사례-best-practices" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<h3 id="단순하게-유지하기">단순하게 유지하기<a href="#단순하게-유지하기" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>복잡한 동시성 로직은 버그의 일반적인 원인입니다. &ldquo;연결당 하나의 고루틴&rdquo; 또는 &ldquo;채널을 사용하는 워커 풀&quot;과 같은 간단한 패턴을 선호하세요. 지나치게 영리한 동시성 솔루션은 종종 유지보수 문제를 일으킵니다.</p>
<h3 id="공유-상태-제한하기">공유 상태 제한하기<a href="#공유-상태-제한하기" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><strong>메모리를 공유하여 통신하는 것이 아니라 통신하여 메모리를 공유</strong> 한다는 개념을 받아들이세요. 가능한 한 각 고루틴이 지역화된 데이터를 가지고 채널을 통해 업데이트나 결과를 통신하도록 시스템을 설계하세요.</p>
<h3 id="고루틴-수명에-유의하기">고루틴 수명에 유의하기<a href="#고루틴-수명에-유의하기" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>항상 고루틴이 완료되면 종료될 수 있도록 보장하세요. 절대 닫히지 않는 채널을 기다리거나, 무한정 블록되는 상황을 피하세요. 고루틴 누수를 방지하기 위해 로그나 메트릭을 통해 추적하세요.</p>
<h3 id="구조화된-동시성-접근-방식">구조화된 동시성 접근 방식<a href="#구조화된-동시성-접근-방식" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>가능한 한 고루틴에 컨텍스트를 전달하여, 상위 요청이 취소되거나 타임아웃을 초과하면 이를 취소할 수 있도록 하세요. 이 접근 방식은 때때로 <strong>구조화된 동시성</strong> 이라고 불리며, 상위 컨텍스트가 종료될 때 모든 하위 고루틴이 적절하게 종료되도록 보장합니다.</p>
<h3 id="적절한-오류-처리">적절한 오류 처리<a href="#적절한-오류-처리" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>때로는 고루틴에서 오류를 전파해야 할 수 있습니다. 일반적인 패턴은 전용 오류 채널로 오류를 보내거나 콜백 메커니즘을 통해 반환하는 것입니다. 또는 공유(뮤텍스로 보호되는) 변수에 오류를 저장하고 WaitGroup을 통해 완료를 알릴 수 있습니다.</p>
<hr>
<p>Go의 동시성 모델은 단순성과 강력함으로 널리 칭찬받고 있습니다. 그러나 다른 동시성 모델과 마찬가지로 올바르게 구현하기는 여전히 까다로울 수 있습니다. 채널, 고루틴 및 sync 패키지를 통해 Go는 동시 및 병렬 프로그램을 위한 강력한 빌딩 블록을 제공합니다. 함정을 이해하고, 모범 사례를 활용하며, 디버깅 도구를 효과적으로 사용함으로써 Go에서 견고하고 효율적인 동시성 애플리케이션을 구축할 수 있습니다.</p>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Read other posts</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://philipjkim.github.io/posts/20250707-pot-limit-omaha-starting-hands/" class="button inline prev">
        &lt; [<span class="button__text">번역글: PLO (팟 리밋 오마하) 스타팅 핸드: 반드시 고려해야 할 3가지</span>]
      </a>
    
    
      ::
    
    
      <a href="https://philipjkim.github.io/posts/20250707-testing-on-toilet-fake-your-way-to/" class="button inline next">
         [<span class="button__text">TotT: 더 나은 테스트를 위한 가짜(Fake) 사용하기</span>] &gt;
      </a>
    
  </div>
</div>


  

  
    
<script src="https://utteranc.es/client.js"
        repo="philipjkim/philipjkim.github.io"
        issue-term="pathname"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2026 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
