<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>개발 팁: 읽기 쉽고 확장 가능한 if 구문 리팩토링 가이드 :: philipjkim</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="본 포스트는 개발자들이 보다 견고하고 적응력 있는 소프트웨어 시스템을 구축할 수 있도록 돕는 것을 목표로 합니다. 이를 위해, 단순한 구문 리팩토링에서부터 정교한 아키텍처 패턴에 이르기까지 `if-else`를 대체할 수 있는 다양한 해결책을 심도 있게 탐구합니다." />
<meta name="keywords" content="programming, dev, refactoring, research" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://philipjkim.github.io/posts/20250905-how-to-replace-if-statements/" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-T6WPMK9J98"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T6WPMK9J98');
</script>




  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="https://philipjkim.github.io/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">







<link rel="shortcut icon" href="https://philipjkim.github.io/favicon.png">
<link rel="apple-touch-icon" href="https://philipjkim.github.io/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="개발 팁: 읽기 쉽고 확장 가능한 if 구문 리팩토링 가이드">
<meta property="og:description" content="본 포스트는 개발자들이 보다 견고하고 적응력 있는 소프트웨어 시스템을 구축할 수 있도록 돕는 것을 목표로 합니다. 이를 위해, 단순한 구문 리팩토링에서부터 정교한 아키텍처 패턴에 이르기까지 `if-else`를 대체할 수 있는 다양한 해결책을 심도 있게 탐구합니다." />
<meta property="og:url" content="https://philipjkim.github.io/posts/20250905-how-to-replace-if-statements/" />
<meta property="og:site_name" content="philipjkim" />

  <meta property="og:image" content="https://philipjkim.github.io/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2025-09-05 13:02:51 &#43;0900 KST" />












</head>
<body>


<div class="container">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    philipjkim
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="https://github.com/philipjkim">GitHub</a></li>
        
      
        
          <li><a href="/dev/hoola-calculator">Hoola Sum Calculator</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="https://github.com/philipjkim" target="_blank">GitHub</a></li>
        
      
        
          <li><a href="/dev/hoola-calculator" >Hoola Sum Calculator</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://philipjkim.github.io/posts/20250905-how-to-replace-if-statements/">개발 팁: 읽기 쉽고 확장 가능한 if 구문 리팩토링 가이드</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-09-05</time><span class="post-author">philipjkim</span></div>

  
    <span class="post-tags">
      
      #<a href="https://philipjkim.github.io/tags/programming/">programming</a>&nbsp;
      
      #<a href="https://philipjkim.github.io/tags/dev/">dev</a>&nbsp;
      
      #<a href="https://philipjkim.github.io/tags/refactoring/">refactoring</a>&nbsp;
      
      #<a href="https://philipjkim.github.io/tags/research/">research</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p><img src="/img/20250905_refactoring_if.png" alt="img"></p>
<ul>
<li><em>프로그래밍에서 if 를 사용하는 조건부 로직을 대체할 수 있는 방법들에 대해 gemini 2.5 pro 에게 요청한 연구 결과입니다.</em></li>
<li><em>모든 예제 코드는 Go 로 작성되었으나, 다른 프로그래밍 언어에 공통적으로 적용할 수 있는 내용들입니다.</em></li>
</ul>
<hr>
<h2 id="서론-조건문의-확산과-기술-부채의-축적">서론: 조건문의 확산과 기술 부채의 축적<a href="#서론-조건문의-확산과-기술-부채의-축적" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>소프트웨어 개발에서 <code>if-else</code> 문은 제어 흐름을 구성하는 가장 기본적인 도구 중 하나입니다. 그러나 이 근본적인 구조는 종종 오용되어, 시간이 지남에 따라 시스템의 건강을 심각하게 해치는 주범이 되기도 합니다. 복잡하게 중첩되거나 끝없이 이어지는 <code>if-else</code> 체인은 가독성을 저해하고 유지보수를 악몽으로 만들며, 이는 소프트웨어 공학에서 &ldquo;코드 스멜(code smell)&ldquo;이라 불리는 명백한 위험 신호입니다. [1, 2, 3]</p>
<p>이러한 조건문의 무분별한 확산은 기술 부채의 축적으로 이어집니다. 초기 구현 단계에서는 가장 빠르고 직관적인 해결책처럼 보일 수 있지만, 복잡한 조건부 로직은 장기적인 관점에서 시스템의 유연성을 저해하고, 새로운 기능을 추가하거나 기존 로직을 수정하는 작업을 극도로 어렵게 만듭니다. 이는 코드의 순환 복잡도(cyclomatic complexity)라는 지표와 직접적인 관련이 있습니다. 순환 복잡도는 코드를 통과하는 독립적인 경로의 수를 정량화한 값으로, 이 값이 높을수록 코드의 이해, 테스트, 수정이 어려워지며 오류 발생 빈도와 강한 상관관계를 보입니다. [2]</p>
<p>본 보고서는 개발자들이 이러한 기술 부채의 덫에서 벗어나, 보다 견고하고 적응력 있는 소프트웨어 시스템을 구축할 수 있도록 돕는 것을 목표로 합니다. 이를 위해, 단순한 구문 리팩토링에서부터 정교한 아키텍처 패턴에 이르기까지 <code>if-else</code>를 대체할 수 있는 다양한 해결책을 심도 있게 탐구할 것입니다. 또한, 이 모든 논의의 기저에는 소프트웨어 설계의 SOLID 원칙이 자리 잡고 있음을 분명히 할 것입니다. [4, 5, 6] 본 보고서를 통해 독자들은 언제 <code>if-else</code>를 사용하고, 언제 더 발전된 패턴을 적용해야 하는지에 대한 정보에 입각한 결정을 내릴 수 있는 통찰력을 얻게 될 것입니다.</p>
<hr>
<h2 id="섹션-1-기초-리팩토링-화살표-안티-패턴arrow-head-anti-pattern-평탄화하기">섹션 1: 기초 리팩토링: 화살표 안티 패턴(Arrow-Head Anti-Pattern) 평탄화하기<a href="#섹션-1-기초-리팩토링-화살표-안티-패턴arrow-head-anti-pattern-평탄화하기" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>조건부 로직과 관련된 가장 즉각적이고 시각적으로 거슬리는 문제는 바로 깊은 중첩입니다. 이 섹션에서는 프로그램의 아키텍처를 근본적으로 변경하지 않으면서 코드 가독성을 높이고 인지 부하를 줄이는 기술에 초점을 맞춥니다.</p>
<h3 id="11-화살표-코드의-해부와-인지-부하에-미치는-영향">1.1. &ldquo;화살표 코드&quot;의 해부와 인지 부하에 미치는 영향<a href="#11-화살표-코드의-해부와-인지-부하에-미치는-영향" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>&ldquo;화살표 안티 패턴(Arrow Anti-Pattern)&ldquo;은 깊게 중첩된 조건문이 만들어내는 시각적 형태를 지칭하는 용어입니다. 코드의 들여쓰기가 오른쪽으로 꾸준히 증가하며, 마치 화살표 모양처럼 보이게 됩니다. 한 자료에서는 이를 &ldquo;고통과 재앙의 방향&quot;을 가리키는 화살이라고 재치 있게 표현하기도 했습니다. [1]</p>
<p>이러한 구조가 문제가 되는 이유는 명확합니다. 이는 주된 로직, 즉 &ldquo;해피 패스(happy path)&ldquo;를 여러 중첩 블록 깊숙이 숨겨버립니다. 코드를 읽는 개발자는 정상적인 상황에서 코드가 어떻게 동작하는지 파악하기 위해 머릿속으로 복잡한 조건 스택을 쌓고 관리해야만 합니다. [1, 7] 이러한 구조는 높은 순환 복잡도와 직접적으로 연결됩니다. 중첩의 각 단계는 가능한 실행 경로의 수를 기하급수적으로 증가시키며, 이는 코드를 완벽하게 테스트하고 정확하게 추론하는 것을 극도로 어렵게 만듭니다. [2]</p>
<h3 id="12-보호-구문guard-clause-해결책-조기-반환의-촉진">1.2. 보호 구문(Guard Clause) 해결책: 조기 반환의 촉진<a href="#12-보호-구문guard-clause-해결책-조기-반환의-촉진" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>보호 구문(Guard Clause)은 화살표 코드 문제에 대한 가장 확실한 해결책으로 제시됩니다. [1, 8, 9, 10] 이 기법의 핵심 원리는 &ldquo;사전 조건 검사&rdquo; 패턴으로 요약할 수 있습니다. 모든 예외적인 조건, 유효성 검사, 또는 특수 사례들을 메서드의 가장 앞부분에서 처리하는 것입니다. 만약 특정 조건이 충족되면, 메서드는 즉시 값을 반환하거나 예외를 던져 실행을 종료합니다. [1, 10] 이 접근 방식은 견고한 &ldquo;빠른 실패(fail-fast)&rdquo; 원칙을 구현하며, 유효하지 않은 데이터가 시스템 깊숙이 전파되는 것을 방지합니다. [10]</p>
<p>아래의 &ldquo;Before&quot;와 &ldquo;After&rdquo; 예제는 <code>getPayAmount</code> 메서드를 통해 중첩되고 읽기 어려운 코드가 어떻게 평탄하고 순차적인 구조로 변환되는지를 명확하게 보여줍니다. [1]</p>
<p><strong>Before: 중첩된 조건문 (화살표 코드)</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="o">*</span><span class="nx">Employee</span><span class="p">)</span><span class="w"> </span><span class="nf">getPayAmount</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="kt">float64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">isDead</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nf">deadAmount</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">isSeparated</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nx">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nf">separatedAmount</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">isRetired</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nx">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nf">retiredAmount</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nx">result</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nf">normalPayAmount</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">result</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>After: 보호 구문 적용</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="o">*</span><span class="nx">Employee</span><span class="p">)</span><span class="w"> </span><span class="nf">getPayAmount</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">isDead</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nf">deadAmount</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">isSeparated</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nf">separatedAmount</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">isRetired</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nf">retiredAmount</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nf">normalPayAmount</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>이러한 시각적 변환은 이 기법의 강력함을 이해하는 데 핵심적입니다. 한편, 메서드 내 &ldquo;단일 출구점(single exit point)&rdquo; 규칙에 대한 오랜 논쟁이 있습니다. 이 규칙은 좋은 의도에서 비롯되었지만, 교조적으로 적용될 경우 오히려 생산성을 저해할 수 있습니다. 보호 구문의 맥락에서, 여러 개의 조기 <code>return</code> 문은 예외 케이스와 핵심 로직을 깔끔하게 분리함으로써 명확성과 가독성을 크게 향상시킵니다. 이는 현대 프로그래밍 실무에서 널리 지지받는 관점입니다. [2, 7, 8]</p>
<p>보호 구문은 단순히 서식을 정리하는 기법을 넘어, 단일 메서드 내에서 관심사의 분리(Separation of Concerns)를 강제하는 마이크로 아키텍처 패턴입니다. 이는 사전 조건 유효성 검사와 핵심 비즈니스 로직 사이에 명확한 경계를 생성합니다. 메서드의 첫 부분은 오직 사전 조건 검증의 책임만을 가지며, 그 뒤에 오는 주된 부분은 핵심 로직 실행의 책임만을 가집니다. 이러한 분리는 핵심 로직이 항상 유효한 입력을 가정하고 작성될 수 있게 하여, 구현을 극적으로 단순화하고 개발자의 인지 부하를 줄여줍니다. 이는 단순히 들여쓰기를 줄이는 것보다 훨씬 더 심오한 이점입니다.</p>
<h3 id="13-복잡한-불리언-표현식-분해">1.3. 복잡한 불리언 표현식 분해<a href="#13-복잡한-불리언-표현식-분해" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>관련된 문제로, 단일 <code>if</code> 문이 지나치게 복잡한 불리언 표현식을 포함하는 경우가 있습니다 (예: <code>if (conditionA &amp;&amp; conditionB || (conditionC &amp;&amp; !conditionD))</code>).</p>
<p>이에 대한 권장 리팩토링 기법은 복잡한 로직을 별도의, 잘 명명된 함수로 추출하는 것입니다. [2] 이는 여러 이점을 가집니다. 첫째, <code>if</code> 문 자체가 자기 서술적이 됩니다 (예: <code>if (isEligibleForPromotion())</code>). 둘째, 로직이 중앙 집중화되어 수정이 용이해집니다. 셋째, 불리언 로직 자체를 독립적으로 단위 테스트할 수 있게 됩니다.</p>
<p>또한, 가능한 경우 부정적인 검사를 긍정적인 검사로 변환하는 사소하지만 유용한 습관도 도움이 됩니다. 이는 인간의 뇌가 로직을 더 쉽게 분석하도록 돕는 경향이 있습니다. [2, 8]</p>
<hr>
<h2 id="섹션-2-데이터-기반-디스패치-순차적-로직에서-직접-조회로">섹션 2: 데이터 기반 디스패치: 순차적 로직에서 직접 조회로<a href="#섹션-2-데이터-기반-디스패치-순차적-로직에서-직접-조회로" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>이 섹션에서는 조건문의 <em>구조</em>를 리팩토링하는 것에서 한 걸음 더 나아가, 조건문이 특정 키에 기반하여 값이나 행동을 선택하는 디스패치(dispatch) 목적으로 사용될 때 이를 완전히 대체하는 방법을 다룹니다.</p>
<h3 id="21-순차적-평가의-비효율성과-확장-불가능성">2.1. 순차적 평가의 비효율성과 확장 불가능성<a href="#21-순차적-평가의-비효율성과-확장-불가능성" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>명령어 문자열, 사용자 역할, 문서 유형과 같은 입력 값을 그에 상응하는 결과에 매핑하기 위해 긴 <code>if-elif-else</code> 체인이나 <code>switch</code> 문을 사용하는 것은 매우 흔한 시나리오입니다. [3, 11]</p>
<p>이 패턴은 두 가지 핵심적인 관점에서 비판받을 수 있습니다:</p>
<ol>
<li><strong>성능</strong>: 평가는 본질적으로 순차적이므로, 시간 복잡도는 O(n)입니다. 성능에 민감한 루프나 트래픽이 많은 시나리오에서 이러한 선형 검색은 병목 현상의 원인이 될 수 있습니다. [11]</li>
<li><strong>유지보수성</strong>: 이 구조는 개방-폐쇄 원칙(Open/Closed Principle)을 직접적으로 위반합니다. 새로운 조건(예: 새로운 명령어)을 추가하려면, 개발자는 반드시 중앙의 조건부 블록을 <em>수정</em>해야 합니다. 이는 회귀 오류의 위험을 증가시키고 개발팀에게 단일 경쟁 지점(single point of contention)을 만듭니다. [3]</li>
</ol>
<h3 id="22-딕셔너리맵-패턴-선언적-접근-방식">2.2. 딕셔너리/맵 패턴: 선언적 접근 방식<a href="#22-딕셔너리맵-패턴-선언적-접근-방식" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>이에 대한 주요 대안은 딕셔너리, 맵, 또는 해시맵과 같은 데이터 구조를 사용하여 조건과 결과 사이에 직접적인 매핑을 생성하는 것입니다. [11, 12, 13, 14]</p>
<p>아래의 &ldquo;Before&quot;와 &ldquo;After&rdquo; 코드 예제는 이러한 로직 변환을 명확하게 보여줍니다. 맵의 &ldquo;값&quot;은 단순한 데이터 타입일 수도 있고, 설정 객체일 수도 있으며, 가장 강력하게는 수행할 작업을 캡슐화하는 함수 객체(예: 람다, 델리게이트, 함수 포인터)일 수 있습니다. [11, 13]</p>
<p><strong>Before: <code>if-else</code>를 사용한 명령어 처리</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">processCommandIf</span><span class="p">(</span><span class="nx">command</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">command</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&#34;create&#34;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Creating item...&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">command</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&#34;delete&#34;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Deleting item...&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">command</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&#34;update&#34;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Updating item...&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Unknown command.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>After: 맵을 사용한 명령어 처리</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">createItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Creating item...&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">deleteItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Deleting item...&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">updateItem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Updating item...&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">unknownCommand</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Unknown command.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">commandActions</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">func</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;create&#34;</span><span class="p">:</span><span class="w"> </span><span class="nx">createItem</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;delete&#34;</span><span class="p">:</span><span class="w"> </span><span class="nx">deleteItem</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s">&#34;update&#34;</span><span class="p">:</span><span class="w"> </span><span class="nx">updateItem</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">processCommandMap</span><span class="p">(</span><span class="nx">command</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">action</span><span class="p">,</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">commandActions</span><span class="p">[</span><span class="nx">command</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">ok</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">action</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nf">unknownCommand</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>이점은 명확합니다. 조회는 평균적으로 O(1) 연산이 되며, 코드는 훨씬 더 깔끔하고 확장 가능해집니다. 새로운 케이스를 추가하는 것은 단순히 맵에 새로운 항목을 추가하는 것으로 끝나며, 실행 로직은 전혀 건드릴 필요가 없는 경우가 많습니다.</p>
<p>이러한 접근 방식은 <code>if-else</code> 체인을 맵으로 대체하는 근본적인 패러다임 전환을 의미합니다. 이는 <em>명령형(imperative)</em> 프로그래밍에서 <em>선언형(declarative)</em> 프로그래밍으로의 전환입니다. <code>if-else</code> 체인은 명령형입니다. 즉, 컴퓨터에게 &ldquo;먼저 이것을 확인해라. 만약 거짓이면, 다음 것을 확인해라&hellip;&ldquo;와 같은 일련의 지시입니다. [11] 반면, 딕셔너리는 선언형입니다. 이는 입력과 출력 간의 관계를 <em>선언</em>하는 데이터 구조입니다: &ldquo;여기에 명령어와 그에 해당하는 핸들러의 완전한 매핑이 있다&rdquo;. [11, 13] 실행 로직은 일반화됩니다: &ldquo;맵에서 입력을 찾아 그 결과를 실행하라.&rdquo; 이러한 &ldquo;무엇(what)&ldquo;과 &ldquo;어떻게(how)&ldquo;의 분리는 아키텍처적으로 매우 중요합니다. 이는 로직(맵의 내용)이 데이터처럼 관리될 수 있음을 의미합니다. 즉, 컴파일된 실행 코드를 변경하지 않고도 설정 파일에서 로드하거나, 동적으로 구축하거나, 심지어 런타임에 수정할 수도 있습니다. 이는 시스템을 훨씬 더 유연하게 만듭니다.</p>
<h3 id="23-고급-적용-규칙-엔진-패턴">2.3. 고급 적용: 규칙 엔진 패턴<a href="#23-고급-적용-규칙-엔진-패턴" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>규칙 엔진(Rules Engine) 패턴은 딕셔너리 접근 방식의 보다 공식화되고 강력한 진화 형태로, 복잡한 비즈니스 로직에 적합합니다. [15] 이 패턴은 &ldquo;규칙&rdquo; 객체들의 컬렉션을 생성하는 것을 포함하는데, 각 규칙은 조건(<code>shouldRun</code>)과 행동(<code>run</code>)을 캡슐화합니다. 그런 다음 엔진은 입력을 받아 규칙들을 순회하며 일치하는 모든 규칙의 행동을 실행합니다. 이는 규칙을 엔진으로부터 분리하여 매우 동적이고 설정 가능한 시스템을 가능하게 합니다.</p>
<hr>
<h2 id="섹션-3-동적-로직을-위한-객체-지향-행동-패턴">섹션 3: 동적 로직을 위한 객체 지향 행동 패턴<a href="#섹션-3-동적-로직을-위한-객체-지향-행동-패턴" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>이 섹션은 보고서의 핵심으로, 조건부 로직을 다형적(polymorphic) 행위로 대체하는 객체 지향 디자인 패턴을 깊이 있게 다룹니다. 이는 사용자의 요구사항에 직접적으로 부응하며, 복잡하고 행위 중심적인 로직을 관리하기 위한 가장 강력한 접근 방식을 제시합니다.</p>
<h3 id="31-근본적인-대안-타입-기반-조건문을-다형성으로-대체하기">3.1. 근본적인 대안: 타입 기반 조건문을 다형성으로 대체하기<a href="#31-근본적인-대안-타입-기반-조건문을-다형성으로-대체하기" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>객체의 타입 코드나 열거형(enum) 값에 따라 분기하는 조건문은 객체 지향 프로그래밍에서 가장 중요한 &ldquo;코드 스멜&rdquo; 중 하나입니다. 이는 로직이 객체 지향적이라기보다는 절차적이며, 다형성을 활용할 절호의 기회를 놓치고 있음을 시사합니다. [16, 17]</p>
<p>다형성의 핵심 원리는 &ldquo;묻지 말고, 시켜라(Tell, Don&rsquo;t Ask)&ldquo;로 요약될 수 있습니다. 객체에게 타입을 물어본 다음 무엇을 할지 결정하는 대신, 우리는 객체에게 행동을 수행하라고 <em>시키고</em>, 해당 객체의 구체적인 구현이 그 행동을 올바르게 수행하는 <em>방법</em>을 알고 있을 것이라고 신뢰합니다. [16, 18]</p>
<p><code>Bird</code> 속도 계산 예제는 이 변환 과정을 명확하게 보여줍니다. &ldquo;Before&rdquo; 코드는 <code>type</code> 필드에 대한 거대한 <code>switch</code> 문을 가진 단일 <code>Bird</code> 구조체를 보여줍니다. &ldquo;After&rdquo; 코드는 <code>GetSpeed()</code> 메서드를 가진 <code>Bird</code> 인터페이스와, 각각 고유한 구현을 제공하는 구체적인 구조체들(<code>European</code>, <code>African</code> 등)을 보여줍니다. [16]</p>
<p><strong>Before: <code>switch</code> 문을 사용한 타입 코드 기반 분기</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="s">&#34;errors&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">const</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">European</span><span class="w">     </span><span class="p">=</span><span class="w"> </span><span class="s">&#34;EUROPEAN&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">African</span><span class="w">      </span><span class="p">=</span><span class="w"> </span><span class="s">&#34;AFRICAN&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">NorwegianBlue</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#34;NORWEGIAN_BLUE&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">Bird</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">Type</span><span class="w">             </span><span class="kt">string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">NumberOfCoconuts</span><span class="w"> </span><span class="kt">int</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">IsNailed</span><span class="w">         </span><span class="kt">bool</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">Voltage</span><span class="w">          </span><span class="kt">float64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">Bird</span><span class="p">)</span><span class="w"> </span><span class="nf">GetSpeed</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="kt">float64</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">Type</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nx">European</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">getBaseSpeed</span><span class="p">(),</span><span class="w"> </span><span class="kc">nil</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nx">African</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">getBaseSpeed</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">getLoadFactor</span><span class="p">()</span><span class="o">*</span><span class="nb">float64</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">NumberOfCoconuts</span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="nx">NorwegianBlue</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nx">IsNailed</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">b</span><span class="p">.</span><span class="nf">getBaseSpeedWithVoltage</span><span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">Voltage</span><span class="p">),</span><span class="w"> </span><span class="kc">nil</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">default</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;Unknown bird type&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// Helper methods</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">Bird</span><span class="p">)</span><span class="w"> </span><span class="nf">getBaseSpeed</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">Bird</span><span class="p">)</span><span class="w"> </span><span class="nf">getLoadFactor</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">Bird</span><span class="p">)</span><span class="w"> </span><span class="nf">getBaseSpeedWithVoltage</span><span class="p">(</span><span class="nx">voltage</span><span class="w"> </span><span class="kt">float64</span><span class="p">)</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">voltage</span><span class="o">*</span><span class="mf">0.1</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>After: 다형성을 사용한 동적 디스패치</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// 1. Bird 인터페이스 정의</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">Bird</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">GetSpeed</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 2. 공통 기능을 위한 기본 구조체 (선택적)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">BirdBase</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BirdBase</span><span class="p">)</span><span class="w"> </span><span class="nf">getBaseSpeed</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 3. 구체적인 Bird 타입들</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">European</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">BirdBase</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">e</span><span class="w"> </span><span class="o">*</span><span class="nx">European</span><span class="p">)</span><span class="w"> </span><span class="nf">GetSpeed</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nf">getBaseSpeed</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">African</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">BirdBase</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">NumberOfCoconuts</span><span class="w"> </span><span class="kt">int</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="o">*</span><span class="nx">African</span><span class="p">)</span><span class="w"> </span><span class="nf">getLoadFactor</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">a</span><span class="w"> </span><span class="o">*</span><span class="nx">African</span><span class="p">)</span><span class="w"> </span><span class="nf">GetSpeed</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nf">getBaseSpeed</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nf">getLoadFactor</span><span class="p">()</span><span class="o">*</span><span class="nb">float64</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">NumberOfCoconuts</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">NorwegianBlue</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">BirdBase</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">IsNailed</span><span class="w"> </span><span class="kt">bool</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">Voltage</span><span class="w">  </span><span class="kt">float64</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">*</span><span class="nx">NorwegianBlue</span><span class="p">)</span><span class="w"> </span><span class="nf">getBaseSpeedWithVoltage</span><span class="p">(</span><span class="nx">voltage</span><span class="w"> </span><span class="kt">float64</span><span class="p">)</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">voltage</span><span class="o">*</span><span class="mf">0.1</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="w"> </span><span class="o">*</span><span class="nx">NorwegianBlue</span><span class="p">)</span><span class="w"> </span><span class="nf">GetSpeed</span><span class="p">()</span><span class="w"> </span><span class="kt">float64</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nx">IsNailed</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">n</span><span class="p">.</span><span class="nf">getBaseSpeedWithVoltage</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">Voltage</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 클라이언트 코드</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// var bird Bird = &amp;European{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// speed := bird.GetSpeed() // 올바른 구현이 자동으로 호출됨</span><span class="w">
</span></span></span></code></pre></div><p>이 리팩토링이 어떻게 자연스럽게 개방-폐쇄 원칙을 준수하는지가 핵심적인 교훈입니다. 새로운 종류의 새를 추가하는 것은 단지 새로운 구조체를 추가하고 인터페이스를 구현하는 것만으로 충분하며, 기존 코드는 전혀 수정할 필요가 없습니다. 이는 시스템을 견고하고 확장 가능하게 만듭니다. [4, 16]</p>
<h3 id="32-전략-패턴-교체-가능한-알고리즘-캡슐화">3.2. 전략 패턴: 교체 가능한 알고리즘 캡슐화<a href="#32-전략-패턴-교체-가능한-알고리즘-캡슐화" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>전략 패턴(Strategy Pattern)은 행위 패턴의 일종으로, 알고리즘군을 정의하고 각 알고리즘을 별도의 객체에 캡슐화하여 런타임에 교체할 수 있도록 합니다. [5, 6, 19]</p>
<p>이 패턴의 주된 사용 사례는 하나의 클래스 내에서 특정 작업을 여러 다른 방식으로 수행하는 거대한 조건문을 대체하는 것입니다. 패턴은 이러한 다양한 &ldquo;방식&rdquo;(알고리즘)을 각각의 &ldquo;전략&rdquo; 객체로 추출합니다. [19]</p>
<p><strong>Before: <code>if-else</code>를 사용한 결제 처리</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">ShoppingCart</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cp">//... other fields</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">sc</span><span class="w"> </span><span class="o">*</span><span class="nx">ShoppingCart</span><span class="p">)</span><span class="w"> </span><span class="nf">Pay</span><span class="p">(</span><span class="nx">method</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">amount</span><span class="w"> </span><span class="kt">float64</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">method</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&#34;creditcard&#34;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Paying %.2f using Credit Card\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">amount</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 신용카드 결제 로직</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">method</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&#34;paypal&#34;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Paying %.2f using PayPal\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">amount</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 페이팔 결제 로직</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Unsupported payment method&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>After: 전략 패턴 적용</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 1. 전략 인터페이스</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">PaymentStrategy</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">Pay</span><span class="p">(</span><span class="nx">amount</span><span class="w"> </span><span class="kt">float64</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 2. 구체적인 전략들</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">CreditCardStrategy</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ccs</span><span class="w"> </span><span class="o">*</span><span class="nx">CreditCardStrategy</span><span class="p">)</span><span class="w"> </span><span class="nf">Pay</span><span class="p">(</span><span class="nx">amount</span><span class="w"> </span><span class="kt">float64</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Paying %.2f using Credit Card\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">amount</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 신용카드 결제 로직</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">PayPalStrategy</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pps</span><span class="w"> </span><span class="o">*</span><span class="nx">PayPalStrategy</span><span class="p">)</span><span class="w"> </span><span class="nf">Pay</span><span class="p">(</span><span class="nx">amount</span><span class="w"> </span><span class="kt">float64</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Paying %.2f using PayPal\n&#34;</span><span class="p">,</span><span class="w"> </span><span class="nx">amount</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 페이팔 결제 로직</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 3. 컨텍스트</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">PaymentContext</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">strategy</span><span class="w"> </span><span class="nx">PaymentStrategy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pc</span><span class="w"> </span><span class="o">*</span><span class="nx">PaymentContext</span><span class="p">)</span><span class="w"> </span><span class="nf">SetStrategy</span><span class="p">(</span><span class="nx">strategy</span><span class="w"> </span><span class="nx">PaymentStrategy</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">pc</span><span class="p">.</span><span class="nx">strategy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">strategy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">pc</span><span class="w"> </span><span class="o">*</span><span class="nx">PaymentContext</span><span class="p">)</span><span class="w"> </span><span class="nf">Pay</span><span class="p">(</span><span class="nx">amount</span><span class="w"> </span><span class="kt">float64</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">pc</span><span class="p">.</span><span class="nx">strategy</span><span class="p">.</span><span class="nf">Pay</span><span class="p">(</span><span class="nx">amount</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 클라이언트 코드</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// context := &amp;PaymentContext{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// context.SetStrategy(&amp;CreditCardStrategy{})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// context.Pay(100.0)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// context.SetStrategy(&amp;PayPalStrategy{})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// context.Pay(200.0)</span><span class="w">
</span></span></span></code></pre></div><h3 id="33-상태-패턴-상태-의존적-행위-관리">3.3. 상태 패턴: 상태 의존적 행위 관리<a href="#33-상태-패턴-상태-의존적-행위-관리" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>상태 패턴(State Pattern)은 객체의 내부 상태가 변경될 때 그 행위를 변경할 수 있도록 하는 행위 패턴입니다. 그 효과는 매우 심오하여, 마치 객체가 자신의 클래스를 바꾸는 것처럼 보이게 만듭니다. [20, 21]</p>
<p>이 패턴의 주된 사용 사례는 유한 상태 기계(finite-state machine)처럼 동작하는 객체를 모델링하는 것입니다. 예를 들어, <code>Document</code> 객체가 <code>Draft</code>, <code>InReview</code>, <code>Published</code>와 같은 상태를 가질 수 있고, 각 상태에 따라 메서드의 로직이 크게 달라지는 경우에 적합합니다. [21]</p>
<p><strong>Before: <code>switch</code> 문을 사용한 상태 관리</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">Document</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">state</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="c1">// &#34;Draft&#34;, &#34;Moderation&#34;, &#34;Published&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cp">//...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">d</span><span class="w"> </span><span class="o">*</span><span class="nx">Document</span><span class="p">)</span><span class="w"> </span><span class="nf">Publish</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="nx">d</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s">&#34;Draft&#34;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Moving from Draft to Moderation.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">d</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#34;Moderation&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s">&#34;Moderation&#34;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Moving from Moderation to Published.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">d</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#34;Published&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="s">&#34;Published&#34;</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Already published. No action taken.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>After: 상태 패턴 적용</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 1. 상태 인터페이스</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">DocumentState</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">Publish</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 2. 컨텍스트 (Document)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">DocumentContext</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">state</span><span class="w"> </span><span class="nx">DocumentState</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">NewDocument</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="nx">DocumentContext</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">doc</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">DocumentContext</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 초기 상태 설정</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">doc</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">DraftState</span><span class="p">{</span><span class="nx">doc</span><span class="p">:</span><span class="w"> </span><span class="nx">doc</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">doc</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">d</span><span class="w"> </span><span class="o">*</span><span class="nx">DocumentContext</span><span class="p">)</span><span class="w"> </span><span class="nf">SetState</span><span class="p">(</span><span class="nx">state</span><span class="w"> </span><span class="nx">DocumentState</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">d</span><span class="p">.</span><span class="nx">state</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">state</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">d</span><span class="w"> </span><span class="o">*</span><span class="nx">DocumentContext</span><span class="p">)</span><span class="w"> </span><span class="nf">Publish</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">d</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nf">Publish</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 3. 구체적인 상태들</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">DraftState</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">doc</span><span class="w"> </span><span class="o">*</span><span class="nx">DocumentContext</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">DraftState</span><span class="p">)</span><span class="w"> </span><span class="nf">Publish</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Moving from Draft to Moderation.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">s</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nf">SetState</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">ModerationState</span><span class="p">{</span><span class="nx">doc</span><span class="p">:</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">doc</span><span class="p">})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">ModerationState</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">doc</span><span class="w"> </span><span class="o">*</span><span class="nx">DocumentContext</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">ModerationState</span><span class="p">)</span><span class="w"> </span><span class="nf">Publish</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Moving from Moderation to Published.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">s</span><span class="p">.</span><span class="nx">doc</span><span class="p">.</span><span class="nf">SetState</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">PublishedState</span><span class="p">{</span><span class="nx">doc</span><span class="p">:</span><span class="w"> </span><span class="nx">s</span><span class="p">.</span><span class="nx">doc</span><span class="p">})</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">PublishedState</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">doc</span><span class="w"> </span><span class="o">*</span><span class="nx">DocumentContext</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">s</span><span class="w"> </span><span class="o">*</span><span class="nx">PublishedState</span><span class="p">)</span><span class="w"> </span><span class="nf">Publish</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Already published. No action taken.&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 클라이언트 코드</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// doc := NewDocument()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// doc.Publish() // Draft -&gt; Moderation</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// doc.Publish() // Moderation -&gt; Published</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// doc.Publish() // Already published</span><span class="w">
</span></span></span></code></pre></div><h3 id="34-비판적-비교-전략-패턴-vs-상태-패턴">3.4. 비판적 비교: 전략 패턴 vs. 상태 패턴<a href="#34-비판적-비교-전략-패턴-vs-상태-패턴" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>이 하위 섹션에서는 구조적으로 유사하여 종종 혼동을 일으키는 이 두 패턴을 직접적으로 비교합니다. 두 패턴 모두 컴포지션과 위임에 의존하지만, 그들의 <em>의도</em>는 다릅니다. [17, 19]</p>
<ul>
<li><strong>전략 패턴</strong>: 객체가 작업을 <em>어떻게</em> 수행하는지에 초점을 맞춥니다. 다양한 전략들은 교체 가능한 알고리즘입니다. 일반적으로 클라이언트 코드가 전략을 선택하여 컨텍스트에 제공하는 책임을 집니다. 전략은 보통 상태가 없으며(stateless) 서로를 인식하지 못합니다. [19, 22]</li>
<li><strong>상태 패턴</strong>: 객체가 현재 상태에서 <em>무엇</em>인지 또는 무엇을 할 수 있는지에 초점을 맞춥니다. 상태 전환은 객체 생명주기의 본질적인 부분이며, 종종 컨텍스트나 상태 객체 자체에 의해 관리됩니다. 상태들은 다음 상태로의 전환 로직을 인코딩하기 때문에 명시적으로 서로를 인식합니다. [20, 21]</li>
</ul>
<p>이러한 행동 패턴들은 단순한 코딩 기법이 아니라, <em>시간의 흐름에 따른 시스템의 동역학</em>을 모델링하는 근본적인 도구입니다. 이들은 아키텍처가 정적이고 하드코딩된 로직을 넘어서, 변화를 위해 설계된 디자인을 수용할 수 있게 합니다. 거대한 <code>if-else</code> 블록은 조건과 행위의 정적인 컴파일 타임 바인딩을 나타냅니다. [16] 한번 컴파일되면 이 로직은 고정됩니다. 반면, 다형성, 전략, 상태 패턴은 이러한 정적 바인딩을 동적인 런타임 바인딩으로 대체합니다. 다형적 호출은 런타임에 올바른 하위 클래스로 동적으로 디스패치됩니다. 컨텍스트의 행위는 새로운 <code>Strategy</code> 객체를 제공함으로써 런타임에 변경될 수 있습니다. 컨텍스트의 내부 <code>State</code> 객체가 교체되면, 컨텍스트가 수행할 수 있는 모든 행동 집합이 변경됩니다. 이것은 심오한 아키텍처적 전환입니다. 이는 우리가 시스템의 핵심적이고 안정적인 부분을 수정하지 않고도 행위가 확장(다형성), 교체(전략), 또는 생명주기를 통해 진화(상태)할 수 있는 시스템을 설계하고 있음을 의미합니다. 이것이 바로 견고하고 유지보수 가능한 소프트웨어를 구축하는 것의 본질입니다.</p>
<hr>
<h2 id="섹션-4-일반적인-조건부-시나리오를-위한-특수-패턴">섹션 4: 일반적인 조건부 시나리오를 위한 특수 패턴<a href="#섹션-4-일반적인-조건부-시나리오를-위한-특수-패턴" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>이 섹션은 개발자들이 일상적으로 마주치는 특정하고 반복적인 조건부 문제에 대한 목표 지향적인 해결책을 제공합니다.</p>
<h3 id="41-nil-길들이기-널-객체-패턴">4.1. <code>nil</code> 길들이기: 널 객체 패턴<a href="#41-nil-길들이기-널-객체-패턴" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p><code>if object!= nil</code> 검사는 특별하지만 극도로 흔한 형태의 조건부 로직입니다. 이는 상용구 코드(boilerplate code)의 빈번한 원천이며, 잊어버렸을 때는 <code>nil</code> 포인터나 인터페이스에 대한 메서드 호출로 인해 발생하는 런타임 패닉(runtime panic)의 원인이 됩니다. [23, 24]</p>
<p>널 객체 패턴(Null Object Pattern)이 이에 대한 해결책으로 제시됩니다. 객체의 부재를 나타내기 위해 <code>nil</code>을 반환하는 대신, 메서드는 필요한 인터페이스를 따르지만 기본적으로 &ldquo;아무것도 하지 않는&rdquo; 구현을 제공하는 구체적인 구조체(struct)를 반환합니다. [23, 25, 26]</p>
<p>로깅이 비활성화될 수 있는 로깅 시스템과 같은 간단한 &ldquo;Before&quot;와 &ldquo;After&rdquo; 예제를 사용할 수 있습니다. &ldquo;Before&rdquo; 코드는 <code>if logger!= nil</code> 검사로 가득 차 있습니다. &ldquo;After&rdquo; 코드는 (비어있는 <code>Info()</code> 메서드를 가진) <code>NullLogger</code>를 사용하고 모든 <code>nil</code> 검사를 제거하여 클라이언트 코드를 극적으로 단순화합니다. [24, 27]</p>
<p><strong>Before: 반복적인 <code>nil</code> 검사</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">Logger</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">Info</span><span class="p">(</span><span class="nx">message</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">ConsoleLogger</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">l</span><span class="w"> </span><span class="o">*</span><span class="nx">ConsoleLogger</span><span class="p">)</span><span class="w"> </span><span class="nf">Info</span><span class="p">(</span><span class="nx">message</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">OrderProcessor</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">logger</span><span class="w"> </span><span class="nx">Logger</span><span class="w"> </span><span class="c1">// logger는 nil일 수 있음</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">OrderProcessor</span><span class="p">)</span><span class="w"> </span><span class="nf">ProcessOrder</span><span class="p">(</span><span class="nx">orderID</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">logger</span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">p</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nf">Info</span><span class="p">(</span><span class="s">&#34;Starting to process order: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">orderID</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cp">//... 처리 로직...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">logger</span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nx">p</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nf">Info</span><span class="p">(</span><span class="s">&#34;Finished processing order: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">orderID</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p><strong>After: 널 객체 패턴 적용</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="s">&#34;fmt&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">Logger</span><span class="w"> </span><span class="kd">interface</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">Info</span><span class="p">(</span><span class="nx">message</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">ConsoleLogger</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">l</span><span class="w"> </span><span class="o">*</span><span class="nx">ConsoleLogger</span><span class="p">)</span><span class="w"> </span><span class="nf">Info</span><span class="p">(</span><span class="nx">message</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 널 객체 구현</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">NullLogger</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">l</span><span class="w"> </span><span class="o">*</span><span class="nx">NullLogger</span><span class="p">)</span><span class="w"> </span><span class="nf">Info</span><span class="p">(</span><span class="nx">message</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 아무것도 하지 않음</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">type</span><span class="w"> </span><span class="nx">OrderProcessor</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">logger</span><span class="w"> </span><span class="nx">Logger</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="nf">NewOrderProcessor</span><span class="p">(</span><span class="nx">logger</span><span class="w"> </span><span class="nx">Logger</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">OrderProcessor</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// logger가 nil이면 NullLogger를 사용하도록 보장</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">logger</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">OrderProcessor</span><span class="p">{</span><span class="nx">logger</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">NullLogger</span><span class="p">{}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">OrderProcessor</span><span class="p">{</span><span class="nx">logger</span><span class="p">:</span><span class="w"> </span><span class="nx">logger</span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">p</span><span class="w"> </span><span class="o">*</span><span class="nx">OrderProcessor</span><span class="p">)</span><span class="w"> </span><span class="nf">ProcessOrder</span><span class="p">(</span><span class="nx">orderID</span><span class="w"> </span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// nil 검사 필요 없음!</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">p</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nf">Info</span><span class="p">(</span><span class="s">&#34;Starting to process order: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">orderID</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cp">//... 처리 로직...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">p</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nf">Info</span><span class="p">(</span><span class="s">&#34;Finished processing order: &#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">orderID</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>이 패턴의 장단점도 논의되어야 합니다. 실제 객체가 예상되었지만 널 객체가 제공된 경우, 이 패턴은 의도치 않게 진짜 오류를 가릴 수 있습니다. 따라서 &ldquo;아무것도 하지 않음&quot;이 유효하고 예상되는 행위인 시나리오에 가장 적합합니다. [26]</p>
<p>널 객체 패턴은 암시적 상태를 명시적으로 만드는 강력한 예시입니다. 이는 언어 수준의 개념(<code>nil</code>)을 애플리케이션 수준의, 도메인 특화된 객체로 변환합니다. <code>nil</code> 값은 암시적 상태입니다. 이는 &ldquo;부재&quot;를 의미하지만, 애플리케이션의 타입 시스템 외부에 존재하며 다형성을 깨뜨립니다(<code>nil</code> 인터페이스 값에 대해 메서드를 호출할 수 없음). 이는 클라이언트 코드가 이 암시적 상태를 끊임없이 확인하도록 강요합니다. 널 객체 패턴은 이 상태를 명시적으로 만듭니다. <code>GuestUser</code>나 <code>DisabledLogger</code>와 같이 부재 상태를 나타내는 도메인 내의 일급 시민(first-class citizen)을 생성합니다. 이 새로운 구조체는 공통 인터페이스를 따르기 때문에 시스템의 다형적 행위에 완전히 참여하며, 이로써 클라이언트가 특별한 검사를 수행할 필요성을 제거합니다. 특수 케이스 플래그나 값을 명시적 객체로 변환하는 이 원칙은 광범하게 적용 가능한 강력한 디자인 기법입니다.</p>
<hr>
<h2 id="섹션-5-의사결정의-기술-올바른-접근법-선택을-위한-프레임워크">섹션 5: 의사결정의 기술: 올바른 접근법 선택을 위한 프레임워크<a href="#섹션-5-의사결정의-기술-올바른-접근법-선택을-위한-프레임워크" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>이 마지막 섹션은 보고서 전체를 종합하여, 개발자들이 조건부 로직을 언제 어떻게 리팩토링할지 결정하는 데 도움이 되는 실용적이고 실행 가능한 프레임워크를 제공합니다.</p>
<h3 id="51-코드-스멜-식별하기-if-문-리팩토링-시점을-위한-체크리스트">5.1. &ldquo;코드 스멜&rdquo; 식별하기: <code>if</code> 문 리팩토링 시점을 위한 체크리스트<a href="#51-코드-스멜-식별하기-if-문-리팩토링-시점을-위한-체크리스트" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>이 하위 섹션에서는 <code>if-else</code> 구조가 문제가 되고 있으며 리팩토링을 고려해야 함을 시사하는 구체적이고 사용하기 쉬운 지표 체크리스트를 제공합니다. 이 목록은 연구 전반에서 발견된 지침들을 종합하여 작성되었습니다.</p>
<ul>
<li><strong>정량적 경험 법칙</strong>: <code>if</code> 문이 약 3개 이상의 조건을 가질 때, <code>switch</code> 문이 약 5개 이상의 <code>case</code>를 가질 때. [3]</li>
<li><strong>구조적 복잡성</strong>: 중첩 깊이가 &ldquo;화살표 코드&quot;를 생성할 때. [1, 2]</li>
<li><strong>유지보수 패턴</strong>: 새로운 <code>elif</code>나 <code>case</code> 분기를 추가하기 위해 해당 블록이 자주 수정될 때 (명백한 개방-폐쇄 원칙 위반). [5]</li>
<li><strong>책임 과부하</strong>: 각 분기가 중요하고 서로 다른 로직을 포함하고 있어, 해당 메서드가 너무 많은 일을 하고 있음을 나타낼 때 (단일 책임 원칙 위반).</li>
<li><strong>절차적 지표</strong>: 조건이 객체의 타입 코드, 열거형, 또는 상태 변수에 기반할 때. [16, 21]</li>
<li><strong>코드 반복</strong>: 코드가 반복적인 <code>if (x!= nil)</code> 검사로 가득 차 있을 때. [26]</li>
</ul>
<h3 id="52-조건부-로직-대안들의-비교-분석">5.2. 조건부 로직 대안들의 비교 분석<a href="#52-조건부-로직-대안들의-비교-분석" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>여기서는 빠른 참조 가이드 역할을 할 핵심적인 고부가가치 표를 제시합니다. 이 표는 개발자의 일상 업무와 관련된 축들, 즉 어떤 문제를 해결하는지, 그 이점은 무엇인지, 그리고 비용은 얼마인지에 따라 각 접근법을 체계적으로 비교함으로써 &ldquo;팁&quot;에 대한 사용자의 요구를 직접적으로 해결합니다.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">기법/패턴</th>
          <th style="text-align: left">주요 사용 사례</th>
          <th style="text-align: left">핵심 이점</th>
          <th style="text-align: left">잠재적 단점/비용</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><strong>보호 구문 (Guard Clause)</strong></td>
          <td style="text-align: left">중첩된 유효성 검사 로직 평탄화</td>
          <td style="text-align: left">가독성 향상, 빠른 실패(fail-fast) 원칙 구현, 핵심 로직 부각</td>
          <td style="text-align: left">메서드 내 다중 출구점 발생, 일부 개발 문화권에서 지양될 수 있음</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>딕셔너리/맵 조회</strong></td>
          <td style="text-align: left">키(key)에 기반한 값 또는 행동 디스패치</td>
          <td style="text-align: left">O(1) 조회 성능, 선언적 스타일, 개방-폐쇄 원칙(OCP) 준수 용이</td>
          <td style="text-align: left">맵 생성 오버헤드, 단순한 조건에는 과도할 수 있음, 런타임 오류 가능성</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>다형성 (Polymorphism)</strong></td>
          <td style="text-align: left">객체 타입에 따라 다른 행위 실행</td>
          <td style="text-align: left">타입 검사 제거, OCP 준수, 코드의 객체 지향성 강화</td>
          <td style="text-align: left">클래스 수 증가, 상속 계층 구조의 복잡성</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>전략 패턴 (Strategy Pattern)</strong></td>
          <td style="text-align: left">런타임에 교체 가능한 알고리즘군 캡슐화</td>
          <td style="text-align: left">OCP 준수, 행위와 컨텍스트의 분리, 높은 유연성</td>
          <td style="text-align: left">클래스 수 증가, 클라이언트가 전략을 알아야 하는 복잡성 추가</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>상태 패턴 (State Pattern)</strong></td>
          <td style="text-align: left">객체의 내부 상태에 따라 행위가 크게 변할 때</td>
          <td style="text-align: left">상태 관련 로직을 각 클래스로 분리, OCP 준수, 명시적인 상태 전환</td>
          <td style="text-align: left">클래스 수 증가, 상태가 적거나 단순할 경우 과도한 설계가 될 수 있음</td>
      </tr>
      <tr>
          <td style="text-align: left"><strong>널 객체 패턴 (Null Object Pattern)</strong></td>
          <td style="text-align: left">반복적인 <code>nil</code> 검사 제거</td>
          <td style="text-align: left">런타임 패닉 방지, 클라이언트 코드 단순화, 상용구 코드 감소</td>
          <td style="text-align: left">실제 오류를 가릴 수 있음, &ldquo;아무것도 안 함&quot;이 유효한 행위일 때만 적합</td>
      </tr>
  </tbody>
</table>
<h3 id="53-트레이드오프-수용하기-추상화의-진정한-비용">5.3. 트레이드오프 수용하기: 추상화의 진정한 비용<a href="#53-트레이드오프-수용하기-추상화의-진정한-비용" class="hanchor" ariaLabel="Anchor">#</a> </h3>
<p>이 마지막 논의는 미묘하고 깊이 있는, 수석 엔지니어 수준의 관점을 제공합니다. 이 패턴들이 복잡성을 마법처럼 제거하는 것이 아니라, 그것을 재구성함으로써 <em>관리</em>한다는 점을 명시적으로 밝힐 것입니다. [22, 28, 29]</p>
<p>추상화의 &ldquo;비용&quot;은 클래스와 파일 수의 증가, 그리고 코드베이스에 익숙하지 않은 개발자가 단순한 흐름을 추적하기 어렵게 만드는 간접성의 계층으로 나타납니다. [6, 29]</p>
<p>이 섹션은 숙련된 엔지니어의 특징이 바로 이러한 비용과, 향상된 유지보수성, 확장성, 테스트 용이성이라는 장기적인 이점을 저울질하는 능력에 있다는 핵심 메시지로 마무리될 것입니다. 단순하고 안정적인 로직의 경우, 평범한 <code>if-else</code> 문이 종종 최상의 도구일 수 있습니다. [6] 진정한 기술은 더 강력한 도구를 언제 꺼내 들어야 하는지 아는 데 있습니다.</p>
<hr>
<h2 id="결론-명령형-분기에서-선언적-설계로">결론: 명령형 분기에서 선언적 설계로<a href="#결론-명령형-분기에서-선언적-설계로" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<p>본 보고서는 보호 구문을 사용한 간단한 코드 평탄화에서부터 맵을 이용한 데이터 기반 디스패치, 그리고 마지막으로 객체 지향 패턴의 강력한 행위 모델링에 이르기까지의 여정을 요약했습니다.</p>
<p>중심 논지는 <code>if</code> 문을 교조적으로 제거하는 것이 아니라, 현명하게 적용하는 것이 목표라는 점을 다시 한번 강조합니다. 진정한 기술은 단순한 조건문의 한계를 알리는 &ldquo;코드 스멜&quot;을 인식하고, 더 견고하고 우아한 설계를 만들기 위해 어떤 패턴을 적용해야 하는지 아는 데 있습니다.</p>
<p>마지막으로, 이는 전문적인 성장의 핵심 요소로 자리매-김할 것입니다. 즉, 오늘 당장 작동하는 코드를 작성하는 것을 넘어서, 앞으로 수년간 진화하고 지속될 수 있도록 설계된 시스템을 구축하는 방향으로 나아가는 것입니다.</p>
<hr>
<h2 id="references">References<a href="#references" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<ul>
<li>[1]<a href="https://refactoring.guru/replace-nested-conditional-with-guard-clauses">https://refactoring.guru/replace-nested-conditional-with-guard-clauses</a></li>
<li>[2]<a href="https://blog.codinghorror.com/flattening-arrow-code/">https://blog.codinghorror.com/flattening-arrow-code/</a></li>
<li>[3]<a href="https://www.servicenow.com/community/architect-articles/design-patterns-for-if-statements/ta-p/2330611">https://www.servicenow.com/community/architect-articles/design-patterns-for-if-statements/ta-p/2330611</a></li>
<li><a href="https://www.youtube.com/watch?v=MgirYruyalI">4</a></li>
<li>[5]<a href="https://ingelbrechtrobin.medium.com/strategy-pattern-because-your-giant-if-statement-is-crying-for-help-48e979d9a399">https://ingelbrechtrobin.medium.com/strategy-pattern-because-your-giant-if-statement-is-crying-for-help-48e979d9a399</a></li>
<li>[6]<a href="https://www.ottorinobruni.com/simplify-your-csharp-code-replace-if-else-with-the-strategy-pattern-in-dotnet/">https://www.ottorinobruni.com/simplify-your-csharp-code-replace-if-else-with-the-strategy-pattern-in-dotnet/</a></li>
<li>[7]<a href="https://dev.to/carlillo/refactoring-guard-clauses-4ee6">https://dev.to/carlillo/refactoring-guard-clauses-4ee6</a></li>
<li>[8]<a href="https://softwareengineering.stackexchange.com/questions/47789/how-would-you-refactor-nested-if-statements">https://softwareengineering.stackexchange.com/questions/47789/how-would-you-refactor-nested-if-statements</a></li>
<li>[9]<a href="http://marchoeijmans.blogspot.com/2012/05/guard-clause.html">http://marchoeijmans.blogspot.com/2012/05/guard-clause.html</a></li>
<li>[10]<a href="https://medium.com/@vikpoca/guard-clauses-over-arrow-code-enhancing-readability-and-maintainability-a8da4ef211a7">https://medium.com/@vikpoca/guard-clauses-over-arrow-code-enhancing-readability-and-maintainability-a8da4ef211a7</a></li>
<li>[11]<a href="https://stackoverflow.com/questions/11445226/better-optimization-technique-using-if-else-or-dictionary">https://stackoverflow.com/questions/11445226/better-optimization-technique-using-if-else-or-dictionary</a></li>
<li>[12]<a href="https://chodounsky.com/2016/04/05/refactoring-techniques-replace-if-with-dictionary-mapping/">https://chodounsky.com/2016/04/05/refactoring-techniques-replace-if-with-dictionary-mapping/</a></li>
<li>[13]<a href="https://stackoverflow.com/questions/59323119/using-dictionary-instead-of-if-statements">https://stackoverflow.com/questions/59323119/using-dictionary-instead-of-if-statements</a></li>
<li>[14]<a href="https://softwareengineering.stackexchange.com/questions/373755/changing-large-number-of-if-elif-else-statements-to-use-underlying-structure">https://softwareengineering.stackexchange.com/questions/373755/changing-large-number-of-if-elif-else-statements-to-use-underlying-structure</a></li>
<li>[15]<a href="https://www.reddit.com/r/node/comments/wjhzs9/what_are_some_ways_to_reduce_nested_if_statements/">https://www.reddit.com/r/node/comments/wjhzs9/what_are_some_ways_to_reduce_nested_if_statements/</a></li>
<li>[16]<a href="https://refactoring.guru/replace-conditional-with-polymorphism">https://refactoring.guru/replace-conditional-with-polymorphism</a></li>
<li>[17]<a href="https://refactoring.guru/replace-type-code-with-state-strategy">https://refactoring.guru/replace-type-code-with-state-strategy</a></li>
<li>[18]<a href="https://www.quora.com/How-do-you-replace-if-else-switch-with-polymorphisim-architecture-software-engineering-polymorphism-game-development">https://www.quora.com/How-do-you-replace-if-else-switch-with-polymorphisim-architecture-software-engineering-polymorphism-game-development</a></li>
<li>[19]<a href="https://refactoring.guru/design-patterns/strategy">https://refactoring.guru/design-patterns/strategy</a></li>
<li>[20]<a href="https://medium.com/@moali314/the-state-design-pattern-a-comprehensive-guide-daa96ac7dbc7">https://medium.com/@moali314/the-state-design-pattern-a-comprehensive-guide-daa96ac7dbc7</a></li>
<li>[21]<a href="https://refactoring.guru/design-patterns/state">https://refactoring.guru/design-patterns/state</a></li>
<li>[22]<a href="https://stackoverflow.com/questions/75346159/why-is-the-strategy-design-pattern-applicable-when-reducing-the-cyclomatic-compl">https://stackoverflow.com/questions/75346159/why-is-the-strategy-design-pattern-applicable-when-reducing-the-cyclomatic-compl</a></li>
<li>[23]<a href="https://www.baeldung.com/java-avoid-null-check">https://www.baeldung.com/java-avoid-null-check</a></li>
<li>[24]<a href="https://www.arhohuttunen.com/avoiding-unnecessary-null-checks/">https://www.arhohuttunen.com/avoiding-unnecessary-null-checks/</a></li>
<li>[25]<a href="https://en.wikipedia.org/wiki/Null_object_pattern">https://en.wikipedia.org/wiki/Null_object_pattern</a></li>
<li>[26]<a href="https://medium.com/system-design-by-harsh-khandelwal/null-object-design-pattern-taming-the-nullpointerexception-beast-6ef027d29118">https://medium.com/system-design-by-harsh-khandelwal/null-object-design-pattern-taming-the-nullpointerexception-beast-6ef027d29118</a></li>
<li>[27]<a href="https://stackoverflow.com/questions/32219558/null-object-design-pattern-vs-null-object-check">https://stackoverflow.com/questions/32219558/null-object-design-pattern-vs-null-object-check</a></li>
<li>[28]<a href="https://www.reddit.com/r/csharp/comments/1fgikll/simplify_your_c_code_replace_ifelse_with_the/">https://www.reddit.com/r/csharp/comments/1fgikll/simplify_your_c_code_replace_ifelse_with_the/</a></li>
<li>[29]<a href="https://news.ycombinator.com/item?id=43785127">https://news.ycombinator.com/item?id=43785127</a></li>
<li>[30]<a href="https://refactoring.guru/design-patterns">https://refactoring.guru/design-patterns</a></li>
<li><a href="https://www.reddit.com/r/ExperiencedDevs/comments/tlxzgj/replace_conditional_with_polymorphism/">31</a></li>
<li>[32]<a href="https://gamedev.stackexchange.com/questions/189756/how-to-replace-if-else-switch-with-polymorphisim">https://gamedev.stackexchange.com/questions/189756/how-to-replace-if-else-switch-with-polymorphisim</a></li>
<li>[33]<a href="https://stackoverflow.com/questions/28049094/replacing-if-else-statement-with-pattern">https://stackoverflow.com/questions/28049094/replacing-if-else-statement-with-pattern</a></li>
<li>[34]<a href="https://www.reddit.com/r/csharp/comments/dccpx9/using_pattern_matching_to_replace_lengthy_ifelse/">https://www.reddit.com/r/csharp/comments/dccpx9/using_pattern_matching_to_replace_lengthy_ifelse/</a></li>
</ul>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Read other posts</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://philipjkim.github.io/posts/20250905-poker-learning-roadmap/" class="button inline prev">
        &lt; [<span class="button__text">텍사스 홀덤 학습 로드맵: 제로부터 영웅까지</span>]
      </a>
    
    
      ::
    
    
      <a href="https://philipjkim.github.io/posts/20250905-introduction-to-tower-of-power/" class="button inline next">
         [<span class="button__text">뮤지션 소개: 타워 오브 파워(Tower of Power): 펑크(Funk)의 교과서를 쓴 그루브의 건축가들</span>] &gt;
      </a>
    
  </div>
</div>


  

  
    
<script src="https://utteranc.es/client.js"
        repo="philipjkim/philipjkim.github.io"
        issue-term="pathname"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2026 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>

<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ 
    startOnLoad: true,
    theme: 'dark'  
  });

  
  document.addEventListener('DOMContentLoaded', function() {
    
    document.querySelectorAll('code.language-mermaid').forEach((block) => {
      const pre = block.parentElement;
      const code = block.textContent;
      
      
      const div = document.createElement('div');
      div.className = 'mermaid';
      div.textContent = code;
      
      
      pre.replaceWith(div);
    });
    
    
    mermaid.run();
  });
</script>





  
</div>

</body>
</html>
