<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">

<dom-module id="image-slider">
  <template>

    <style is="custom-style">
      paper-icon-button.round {
        background-color: var(--paper-grey-300);
        opacity: 0.3;
        color: var(--paper-grey-700);
        border-radius: 20px;
        padding: 2px;
        margin: 5px;
      }
    </style>

    <div style="position: relative;">
      <div id="controls" style="position: absolute;">
        <paper-icon-button icon="icons:chevron-left" on-tap="prev" class="round"></paper-icon-button>
        <paper-icon-button icon="icons:chevron-right" on-tap="next" class="round"></paper-icon-button>
      </div>
      <img id="image" src="{{currentImg}}" title$="{{currentImg}}">
    </div>
  </template>

  <script>
    Polymer({
      is: 'image-slider',
      properties: {
        images: {
          type: Array,
          value: [],
          notify: true,
          observer: '_onImagesChanged'
        },
        currentPos: {
          type: Number,
          value: 0,
          readonly: true
        },
        currentImg: {
          type: String,
          value: '',
          readonly: true
        }
      },
      ready: function() {
        this._onImagesChanged();
      },
      prev: function() {
        if (this.currentPos > 0) {
          this.currentPos--;
        } else {
          this.currentPos = this.images.length - 1;
        }
        this.currentImg = this.images[this.currentPos];
      },
      next: function() {
        if (this.currentPos < this.images.length - 1) {
          this.currentPos++;
        } else {
          this.currentPos = 0;
        }
        this.currentImg = this.images[this.currentPos];
      },
      _onImagesChanged: function() {
        if (this.images.length == 0) {
          this.hidden = true;
        } else {
          this.currentPos = 0;
          this.currentImg = this.images[this.currentPos];
          this.hidden = false;
          this.$.controls.hidden = this.images.length == 1;
        }
      }
    });
  </script>
</dom-module>
